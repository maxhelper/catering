# Документация проекта Catering для передачи разработчику

## Общая информация

**Тип проекта:** Сайт кейтеринговой компании
**Фронтенд:** Статический HTML/CSS экспортированный из Framer
**Бэкенд:** PHP (простая админ-панель)
**База данных:** JSON-файлы (без СУБД)
**Дата последнего изменения:** 29 декабря 2025

---

## Структура проекта

```
/
├── admin/                    # Админ-панель
│   ├── index.php            # Управление мероприятиями
│   ├── boxes.php            # Управление кейтеринг-боксами
│   ├── login.php            # Страница авторизации
│   ├── logout.php           # Выход из админки
│   ├── events.json          # Данные мероприятий
│   ├── boxes.json           # Данные боксов
│   └── uploads/             # Загруженные изображения (~60 файлов)
│
├── api/                      # REST API для фронтенда
│   ├── events.php           # GET /api/events.php[?id=xxx]
│   └── boxes.php            # GET /api/boxes.php[?id=xxx]
│
├── assets/
│   ├── cms/
│   │   └── cmsScript.js     # Загрузка событий в карусель
│   └── main/
│       └── stylesheet.css   # Основные стили
│
├── index.html               # Главная страница
├── events.html              # Страница мероприятий
├── catering-box.html        # Каталог боксов
├── box-details.html         # Детальная страница бокса
├── cart-form.html           # Форма заказа
├── carousel.html            # Карусель событий
├── outdoor-restaurant.html  # Страница ресторана
│
├── framer-cms.js            # Интеграция с Framer CMS (~2400 строк)
├── enhanced_localizer_clean.js  # Скрипт локализации Framer-ресурсов
└── webcopy-origin.txt       # Исходный текст для копирайтинга
```

---

## Критические проблемы безопасности

### 1. Хардкод пароля (КРИТИЧНО)
**Файл:** `admin/login.php:4`
```php
if ($_POST['password'] === 'max') {
```
**Действие:** Необходимо заменить на хеширование паролей и хранение в безопасном месте.

### 2. Отсутствие CSRF-защиты
Формы в админ-панели не имеют CSRF-токенов.

### 3. Отладочные файлы в продакшене
- `admin/phpinfo.php` — раскрывает информацию о сервере
- `admin/debug.php` — отладочный файл
- `admin/test-debug.php` — тестовый отладочный файл

**Действие:** Удалить перед деплоем.

### 4. Полный CORS (Access-Control-Allow-Origin: *)
**Файлы:** `api/events.php`, `api/boxes.php`
Рекомендуется ограничить список разрешённых доменов.

---

## Как работает проект

### Админ-панель

1. **Авторизация:** сессионная, пароль `max`
2. **Мероприятия (index.php):**
   - Добавление/редактирование/удаление
   - Загрузка множества фотографий
   - Drag-and-drop загрузка
   - Данные в `events.json`

3. **Кейтеринг-боксы (boxes.php):**
   - Название, цена, описание
   - До 3 фотографий на бокс
   - Бейджи (вес, кол-во персон)
   - Данные в `boxes.json`

### API

```
GET /api/events.php          → Все мероприятия
GET /api/events.php?id=xxx   → Конкретное мероприятие
GET /api/boxes.php           → Все боксы
GET /api/boxes.php?id=xxx    → Конкретный бокс
```

Ответ — JSON с абсолютными URL для изображений.

### Фронтенд

Статические HTML-страницы экспортированные из Framer. JavaScript подгружает данные через API и рендерит в карусели/списки.

**Основной скрипт загрузки:** `assets/cms/cmsScript.js`
- Загружает `events.json` напрямую
- Клонирует шаблонные слайды
- Генерирует событие `cardsReady` по завершении

---

## Технологии и зависимости

### Бэкенд
- PHP 7+ (чистый PHP, без фреймворков)
- Файловое хранилище (JSON)

### Фронтенд
- HTML5
- Tailwind CSS (через CDN в админке)
- Bootstrap 5 (login.php)
- Swiper.js (для каруселей)
- Vanilla JavaScript

### Внешние ресурсы
- `cdn.tailwindcss.com`
- `fonts.googleapis.com` (Inter)
- `cdn.jsdelivr.net` (Bootstrap)
- Framer CDN ресурсы

---

## Для запуска локально

1. Нужен PHP с поддержкой JSON и сессий
2. Разместить в корне веб-сервера (Apache/Nginx с PHP)
3. Убедиться что `admin/uploads/` доступна для записи
4. Открыть `/admin/login.php` для входа в админку

### Простой запуск через PHP:
```bash
cd /path/to/project
php -S localhost:8000
```
Затем открыть http://localhost:8000

---

## Framer-интеграция

Проект создан с помощью Framer. Файл `framer-cms.js` (~2400 строк) содержит:
- Класс `FramerCMS` для работы с API
- Mock-данные для тестирования
- Рендеринг боксов в сетку
- Обработка URL-параметров

Скрипт `enhanced_localizer_clean.js` — утилита Node.js для оффлайн-конвертации Framer-ресурсов (отключает аналитику, локализует URL).

---

## Текущие данные

### Боксы (7 шт):
1. Италия Анипасто — 5600₽
2. Вегетарианский сет — 3200₽
3. Мясное плато — 4800₽
4. Сырное плато — 4300₽
5. Коктейльные закуски — 5550₽
6. Сет круассанов — 1750₽
7. Сладкий сет — 1850₽

### Мероприятия
Загружены с фотографиями и описаниями в `admin/events.json`

---

## Рекомендации по доработке

### Приоритет 1 (Безопасность)
- [ ] Убрать хардкод пароля
- [ ] Добавить CSRF-токены
- [ ] Удалить debug-файлы
- [ ] Ограничить CORS

### Приоритет 2 (Функциональность)
- [ ] Добавить валидацию форм на бэкенде
- [ ] Валидация типов загружаемых файлов
- [ ] Ограничение размера загружаемых файлов
- [ ] Добавить пагинацию в API

### Приоритет 3 (Качество кода)
- [ ] Вынести общий код в includes
- [ ] Добавить обработку ошибок
- [ ] Переход на PDO/MySQL вместо JSON
- [ ] Документирование API (OpenAPI/Swagger)

---

## Дизайн и ТЗ

### Макеты в Figma
https://www.figma.com/design/TKt8was5hRX55lyxorsMwz/Кейтеринг?node-id=317-11053&t=OvNvv6N6IVaRlBvK-1

### Видео-ТЗ от дизайнера (Loom)
Комментарии о том, что нужно изменить и переделать:

1. **Часть 1:** https://www.loom.com/share/71998b35f22147bfb39976465dfef459
2. **Часть 2:** https://www.loom.com/share/b8eff4c72b644f98875faf2f7d83679e

### Framer-проект
https://framer.com/remix/bkjLol05nqDUwPuS7FKF

---

*Документ создан: 31 января 2026*
