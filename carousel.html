<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Literata:ital,opsz,wght@0,7..72,200..900;1,7..72,200..900&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/assets/main/stylesheet.css" />
    <script src="/assets/cms/cmsScript.js"></script>
    <title>Carousel</title>
  </head>
  <body>
    <div class="eventscarouselwrapper">
      <div class="carousel-fade-left"></div>
      <div class="swiper swiper-events">
        <div class="swiper-wrapper events">
          <div class="swiper-slide events">
            <div class="swipereventscontent">
              <div class="swipereventsquantitywrapper">
                <p class="swipereventsquantitytext">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä—Å–æ–Ω:&nbsp;</p>
                <p class="swipereventsquantitytext" id="quantity">36</p>
              </div>
              <div class="swipereventsdivider"></div>
              <div class="swipereventstext">
                <h1 class="eventsuppertext" id="uppertext">–ö–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—è</h1>
                <h1 class="eventslowertext" id="lowertext">INTRA-TECH</h1>
              </div>
            </div>
            <div class="swipereventsgradient"></div>
            <div class="eventid-out" id="id-out">1</div>
            <div class="events-slide-hover">
              <div class="animated-text">
                <span class="letter">–°</span>
                <span class="letter">–º</span>
                <span class="letter">–æ</span>
                <span class="letter">—Ç</span>
                <span class="letter">—Ä</span>
                <span class="letter">–µ</span>
                <span class="letter">—Ç</span>
                <span class="letter">—å</span>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="carousel-fade-right"></div>
      <div class="eventscarouselbuttons">
        <div class="events-button-prev">
          <img src="assets/main/img/left-arrow.svg" alt="" />
        </div>
        <div class="events-button-next">
          <img src="assets/main/img/right-arrow.svg" alt="" />
        </div>
      </div>
      <div class="eventsmodalwindowswrapper">
        <div class="storieswrapper">
          <div class="swiper-wrapper stories">
            <div class="swiper-slide story-slide">
              <div class="inner-swiper">
                <div class="swiper-wrapper">
                  <div class="swiper-slide inner-slide"></div>
                </div>
              </div>
              <div class="eventid-in" id="id-in">1</div>
              <div class="stories-overlay"></div>
              <div class="swipereventscontentinner">
                <div class="swipereventsquantitywrapper">
                  <p class="swipereventsquantitytext">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä—Å–æ–Ω:&nbsp;</p>
                  <p class="swipereventsquantitytext" id="quantity">36</p>
                </div>
                <div class="swipereventsdivider"></div>
                <div class="swipereventstext">
                  <h1 class="eventsuppertext" id="uppertext">–ö–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—è</h1>
                  <h1 class="eventslowertext" id="lowertext">INTRA-TECH</h1>
                </div>
              </div>
              <div class="swipereventsgradient"></div>
            </div>
          </div>
        </div>
        <div class="eventsmodalnavigation">
          <div class="storynavigation">
            <div class="pagination">
              <div class="pagination-bullet">
                <div class="progress-bar"></div>
              </div>
            </div>
            <div class="closemodal">
              <img src="assets/main/img/x.svg" alt="" />
            </div>
          </div>
          <div class="inner-prev">
            <img src="assets/main/img/left-arrow.svg" alt="" />
          </div>
          <div class="inner-next">
            <img src="assets/main/img/right-arrow.svg" alt="" />
          </div>
        </div>
        <div class="eventsmodalbackground"></div>
      </div>
    </div>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"
    />

    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

    <script>
      /* Main carousel initialize */
      document.addEventListener("DOMContentLoaded", () => {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ Swiper –∑–∞–≥—Ä—É–∂–µ–Ω
        if (typeof Swiper !== 'undefined') {
          initializeSwiper();
        } else {
          // –ï—Å–ª–∏ Swiper –µ—â–µ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω, –∂–¥–µ–º –µ–≥–æ –∑–∞–≥—Ä—É–∑–∫–∏
          const swiperScript = document.querySelector('script[src*="swiper"]');
          swiperScript.addEventListener('load', initializeSwiper);
        }

        function initializeSwiper() {
          const swiperEvents = new Swiper(".swiper.swiper-events", {
            loop: false,
            slidesOffsetBefore: 60,
            slidesOffsetAfter: 60,
            slidesPerView: "auto",
            navigation: {
              nextEl: ".events-button-next",
              prevEl: ".events-button-prev",
            },
            breakpoints: {
              0: {
                slidesOffsetBefore: 10,
                slidesOffsetAfter: 10,
              },
              1279: {
                slidesOffsetBefore: 60,
                slidesOffsetAfter: 60,
              }
            },
          });
        }
      });
    </script>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        document.addEventListener("cardsReady", () => {
          setTimeout(() => {
            const SLIDE_DURATION = 5000;

            // –ù–∞—Ö–æ–¥–∏–º —Å–ª–∞–π–¥—ã —Å–æ–±—ã—Ç–∏–π
            const eventSlides = Array.from(
              document.querySelectorAll(".swiper-slide.events")
            );

            // –ù–∞—Ö–æ–¥–∏–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∏ –µ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
            const modal = document.querySelector(".eventsmodalwindowswrapper");
            const storiesWrapper = modal.querySelector(
              ".storieswrapper .swiper-wrapper.stories"
            );
            const storySlides = Array.from(
              storiesWrapper.querySelectorAll(".swiper-slide.story-slide")
            );

            // –ù–∞—Ö–æ–¥–∏–º –∫–Ω–æ–ø–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
            const btnPrev = modal.querySelector(".inner-prev");
            const btnNext = modal.querySelector(".inner-next");
            const paginationWrapper = modal.querySelector(".pagination");
            const btnClose = modal.querySelector(".closemodal");
            const navWrapper = modal.querySelector(".eventsmodalnavigation");

            // –£–±–µ–¥–∏–º—Å—è —á—Ç–æ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ —Å–∫—Ä—ã—Ç–æ
            modal.style.display = "none";

            let currentStoryIndex = 0;
            let currentInnerIndex = 0;
            let autoProgressTimeout;

            Object.assign(navWrapper.style, {
              position: "absolute",
              left: "50%",
              transform: "translateX(-50%)",
              transition: "opacity 0.5s ease",
              opacity: "1"
            });

            function resetStyles() {
              clearTimeout(autoProgressTimeout);
              storiesWrapper.style.transition = "none";
              storiesWrapper.style.transform = "translateX(0)";
              storySlides.forEach((s) => {
                s.style.width = "";
                const inner = s.querySelector(".inner-swiper .swiper-wrapper");
                if (inner) {
                  inner.style.transition = "none";
                  inner.style.transform = "translateX(0)";
                }
              });
            }

            function openStory(idx) {
              currentStoryIndex = idx;
              currentInnerIndex = 0;
              resetStyles();
              
              // Move modal to parent document
              const parentBody = window.parent.document.body;
              if (!parentBody.contains(modal)) {
                // Copy all necessary styles to parent document
                const styles = Array.from(document.styleSheets).map(sheet => {
                  try {
                    return Array.from(sheet.cssRules)
                      .map(rule => rule.cssText)
                      .join('\n');
                  } catch (e) {
                    // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –≤–Ω–µ—à–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã —Å—Ç–∏–ª–µ–π –∏–∑-–∑–∞ CORS
                    return '';
                  }
                }).join('\n');

                const styleElement = window.parent.document.createElement('style');
                styleElement.setAttribute('data-from-iframe', 'true');
                styleElement.textContent = styles;
                window.parent.document.head.appendChild(styleElement);

                // –ö–æ–ø–∏—Ä—É–µ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ —à—Ä–∏—Ñ—Ç—ã –∏ —Å—Ç–∏–ª–∏
                const fontLinks = document.querySelectorAll('link[rel="preconnect"], link[href*="fonts.googleapis"]');
                fontLinks.forEach(link => {
                  if (!window.parent.document.querySelector(`link[href="${link.href}"]`)) {
                    const newLink = window.parent.document.createElement('link');
                    Array.from(link.attributes).forEach(attr => {
                      newLink.setAttribute(attr.name, attr.value);
                    });
                    window.parent.document.head.appendChild(newLink);
                  }
                });

                // –î–æ–±–∞–≤–ª—è–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç
                parentBody.appendChild(modal);

                // Ensure modal is positioned correctly in parent window
                Object.assign(modal.style, {
                  position: 'fixed',
                  top: '0',
                  left: '0',
                  width: '100%',
                  height: '100%',
                  zIndex: '9999'
                });

                // –î–æ–±–∞–≤–ª—è–µ–º Swiper —Å—Ç–∏–ª–∏ –µ—Å–ª–∏ –æ–Ω–∏ –Ω—É–∂–Ω—ã
                if (!window.parent.document.querySelector('link[href*="swiper"]')) {
                  const swiperStyle = document.querySelector('link[href*="swiper"]');
                  if (swiperStyle) {
                    const newSwiperStyle = swiperStyle.cloneNode(true);
                    window.parent.document.head.appendChild(newSwiperStyle);
                  }
                }
              }
              
              modal.style.display = "flex";
              navWrapper.style.opacity = "1";
              updateSlidesStyle();
              requestAnimationFrame(() => requestAnimationFrame(centerStory));
            }

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –ø—Ä—è–º—ã—Ö –∫–ª–∏–∫–æ–≤ –ø–æ —Å–ª–∞–π–¥–∞–º —Å–æ–±—ã—Ç–∏–π
            eventSlides.forEach((slide, idx) => {
              slide.addEventListener("click", (e) => {
                console.log("üéØ –ö–ª–∏–∫ –ø–æ —Å–ª–∞–π–¥—É:", idx);
                console.log("–≠–ª–µ–º–µ–Ω—Ç, –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É –∫–ª–∏–∫–Ω—É–ª–∏:", e.target);

                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –±—ã–ª –ª–∏ –∫–ª–∏–∫ –ø–æ eventid-out
                const eventIdOutElement = e.target.closest(
                  "[eventid-out], .eventid-out"
                );
                console.log("–ù–∞–π–¥–µ–Ω —ç–ª–µ–º–µ–Ω—Ç —Å eventid-out:", eventIdOutElement);

                if (
                  eventIdOutElement &&
                  !eventIdOutElement.classList.contains("w-dyn-bind-empty")
                ) {
                  console.log(
                    "eventid-out —ç–ª–µ–º–µ–Ω—Ç –≤–∞–ª–∏–¥–µ–Ω (–Ω–µ—Ç –∫–ª–∞—Å—Å–∞ w-dyn-bind-empty)"
                  );

                  const eventId =
                    eventIdOutElement.getAttribute("eventid-out") ||
                    eventIdOutElement.dataset.eventidOut;
                  console.log("–ü–æ–ª—É—á–µ–Ω–Ω—ã–π eventId:", eventId);

                  if (eventId) {
                    console.log(
                      "–ò—â–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –∏—Å—Ç–æ—Ä–∏—é –¥–ª—è eventId:",
                      eventId
                    );
                    // –ò—â–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –∏—Å—Ç–æ—Ä–∏—é —Å eventid-in
                    const matchIndex = storySlides.findIndex((story) => {
                      const inId =
                        story.getAttribute("eventid-in") ||
                        story.dataset.eventidIn;
                      console.log("–ü—Ä–æ–≤–µ—Ä—è–µ–º story —Å eventid-in:", inId);
                      const match =
                        inId === eventId &&
                        !story
                          .querySelector(".eventid-in")
                          .classList.contains("w-dyn-bind-empty");
                      if (match) {
                        console.log("–ù–∞—à–ª–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ!");
                      }
                      return match;
                    });
                    console.log("–†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–∏—Å–∫–∞ matchIndex:", matchIndex);

                    if (matchIndex !== -1) {
                      console.log(
                        "–û—Ç–∫—Ä—ã–≤–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é –ø–æ –Ω–∞–π–¥–µ–Ω–Ω–æ–º—É –∏–Ω–¥–µ–∫—Å—É:",
                        matchIndex
                      );
                      e.preventDefault();
                      e.stopPropagation();
                      openStory(matchIndex);
                      return;
                    }
                  }
                }
                // –ï—Å–ª–∏ –Ω–µ –Ω–∞—à–ª–∏ eventid-out –∏–ª–∏ –Ω–µ –Ω–∞—à–ª–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π eventid-in, –æ—Ç–∫—Ä—ã–≤–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é –ø–æ –∏–Ω–¥–µ–∫—Å—É —Å–ª–∞–π–¥–∞
                console.log("–û—Ç–∫—Ä—ã–≤–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é –ø–æ –∏–Ω–¥–µ–∫—Å—É —Å–ª–∞–π–¥–∞:", idx);
                openStory(idx);
              });
            });

            function updateSlidesStyle() {
              storySlides.forEach((s, idx) => {
                const overlay = s.querySelector(".stories-overlay");
                if (overlay) {
                  Object.assign(overlay.style, {
                    position: "absolute",
                    top: "0",
                    left: "0",
                    width: "100%",
                    height: "100%",
                    pointerEvents: "none",
                    transition: "opacity 0.5s ease",
                    display: idx === currentStoryIndex ? "none" : "block",
                    opacity: idx === currentStoryIndex ? "0" : "1",
                  });
                }
                // –î–æ–±–∞–≤–ª—è–µ–º cursor: pointer –¥–ª—è –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö –∏—Å—Ç–æ—Ä–∏–π
                s.style.cursor = idx === currentStoryIndex ? "" : "pointer";
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—É—é —à–∏—Ä–∏–Ω—É —Å–ª–∞–π–¥–æ–≤ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è
                s.style.transition = "";
                s.style.width = "";
              });
            }

            function centerStory() {
              const containerWidth = storiesWrapper.parentElement.clientWidth;
              const active = storySlides[currentStoryIndex];
              const shift =
                containerWidth / 2 -
                (active.offsetLeft + active.offsetWidth / 2);

              storiesWrapper.style.transition = "transform 0.5s ease";
              storiesWrapper.style.transform = `translateX(${shift}px)`;

              updateInnerSlide();
            }

            function updateInnerSlide() {
              clearTimeout(autoProgressTimeout);
              const story = storySlides[currentStoryIndex];
              const innerWrapper = story.querySelector(
                ".inner-swiper .swiper-wrapper"
              );
              const innerSlides = Array.from(
                innerWrapper.querySelectorAll(".inner-slide")
              );
              if (currentInnerIndex >= innerSlides.length)
                currentInnerIndex = 0;

              storySlides.forEach((storySlide, idx) => {
                const wrapper = storySlide.querySelector(
                  ".inner-swiper .swiper-wrapper"
                );
                if (wrapper && idx !== currentStoryIndex) {
                  wrapper.style.transition = "none";
                  wrapper.style.transform = "translateX(0)";
                }
              });

              const w = innerSlides[0]?.offsetWidth || 0;
              innerWrapper.style.transition = "none";
              innerWrapper.style.transform = `translateX(-${
                currentInnerIndex * w
              }px)`;
              innerWrapper.offsetHeight;
              innerWrapper.style.transition = "transform 0.5s ease";

              btnPrev.classList.toggle(
                "swiper-button-disabled",
                currentStoryIndex === 0 && currentInnerIndex === 0
              );
              btnNext.classList.toggle(
                "swiper-button-disabled",
                currentStoryIndex === storySlides.length - 1 &&
                  currentInnerIndex === innerSlides.length - 1
              );

              paginationWrapper.innerHTML = "";
              innerSlides.forEach((_, i) => {
                const bullet = document.createElement("div");
                bullet.className = "pagination-bullet";
                bullet.style.borderRadius = "4px";
                const prog = document.createElement("div");
                prog.className = "progress-bar";
                prog.style.borderRadius = "4px";
                prog.style.width = i < currentInnerIndex ? "100%" : "0%";
                prog.style.transition = "none";
                bullet.appendChild(prog);
                bullet.addEventListener("click", () => {
                  clearTimeout(autoProgressTimeout);
                  currentInnerIndex = i;
                  updateInnerSlide();
                });
                paginationWrapper.appendChild(bullet);
              });

              progressRemaining = SLIDE_DURATION;
              progressStartTime = Date.now();
              isPaused = false;

              const activeProg =
                paginationWrapper.children[currentInnerIndex]?.querySelector(
                  ".progress-bar"
                );
              if (activeProg) {
                activeProg.style.transition = "none";
                activeProg.style.width = "0%";
                activeProg.offsetWidth;
                activeProg.style.transition = `width ${SLIDE_DURATION}ms linear`;
                activeProg.style.width = "100%";
              }

              autoProgressTimeout = setTimeout(goNext, SLIDE_DURATION);
            }

            let startX = 0;

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è storiesWrapper
            storiesWrapper.addEventListener("click", (e) => {
              const clickedSlide = e.target.closest(
                ".swiper-slide.story-slide"
              );
              if (
                clickedSlide &&
                !clickedSlide.contains(storySlides[currentStoryIndex])
              ) {
                const newIndex = storySlides.indexOf(clickedSlide);
                if (newIndex !== -1) {
                  currentStoryIndex = newIndex;
                  currentInnerIndex = 0;
                  updateSlidesStyle();
                  centerStory();
                }
              }
            });

            let isActiveStoryInteraction = false;
            let isPointerDown = false;

            storiesWrapper.addEventListener("pointerdown", (e) => {
              const activeStory = storySlides[currentStoryIndex];
              const isClickOnActive = activeStory.contains(e.target);

              if (isClickOnActive) {
                isActiveStoryInteraction = true;
                isPointerDown = true;
                startX = e.clientX;
                document.addEventListener("pointermove", handlePointerMove);
              }
            });

            function handlePointerMove(e) {
              if (!isPointerDown) return;
            }

            function handleGlobalPointerUp(e) {
              if (!isPointerDown) return;

              document.removeEventListener("pointermove", handlePointerMove);

              const diff = e.clientX - startX;
              const activeStory = storySlides[currentStoryIndex];

              if (isActiveStoryInteraction) {
                if (Math.abs(diff) > 40) {
                  diff < 0 ? goNext() : goPrev();
                } else if (activeStory.contains(e.target)) {
                  openActiveLink();
                }
              }

              isPointerDown = false;
              isActiveStoryInteraction = false;
            }

            function handlePointerCancel() {
              if (isPointerDown) {
                isPointerDown = false;
                isActiveStoryInteraction = false;
              }
            }

            // –°–ª—É—à–∞–µ–º –≥–ª–æ–±–∞–ª—å–Ω–æ
            document.addEventListener("pointerup", handleGlobalPointerUp);
            document.addEventListener("pointercancel", handlePointerCancel);

            function openActiveLink() {
              const slide = storySlides[currentStoryIndex];
              const url = slide.dataset.url || slide.querySelector("a")?.href;
              if (url) window.location.href = url;
            }

            function goNext() {
              const innerCount =
                storySlides[currentStoryIndex].querySelectorAll(
                  ".inner-slide"
                ).length;
              if (currentInnerIndex < innerCount - 1) {
                currentInnerIndex++;
                updateInnerSlide();
              } else if (currentStoryIndex < storySlides.length - 1) {
                currentStoryIndex++;
                currentInnerIndex = 0;
                navWrapper.style.opacity = "0";
                updateSlidesStyle();
                requestAnimationFrame(() => {
                  centerStory();
                  navWrapper.style.opacity = "1";
                });
              }
            }
            function goPrev() {
              if (currentInnerIndex > 0) {
                currentInnerIndex--;
                updateInnerSlide();
              } else if (currentStoryIndex > 0) {
                currentStoryIndex--;
                const prevCount =
                  storySlides[currentStoryIndex].querySelectorAll(
                    ".inner-slide"
                  ).length;
                currentInnerIndex = prevCount - 1;
                navWrapper.style.opacity = "0";
                updateSlidesStyle();
                requestAnimationFrame(() => {
                  centerStory();
                  navWrapper.style.opacity = "1";
                });
              }
            }

            btnNext.addEventListener("click", () => {
              clearTimeout(autoProgressTimeout);
              goNext();
            });

            btnPrev.addEventListener("click", () => {
              clearTimeout(autoProgressTimeout);
              goPrev();
            });

            btnClose.addEventListener("click", () => {
              clearTimeout(autoProgressTimeout);
              modal.style.display = "none";
              // Return modal back to iframe when closed
              if (window.parent.document.body.contains(modal)) {
                document.querySelector('.eventsmodalwindowswrapper').appendChild(modal);
                
                // –£–¥–∞–ª—è–µ–º –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏ –∏ —Å—Å—ã–ª–∫–∏ –∏–∑ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞
                window.parent.document.querySelectorAll('style[data-from-iframe]').forEach(style => {
                  style.remove();
                });
              }
            });
          }, 100); // –ó–∞–¥–µ—Ä–∂–∫–∞ 100–º—Å –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è DOM
        }); // cardsReady
      }); // DOMContentLoaded
    </script>

    <script type="module">
      let hasShownHover = false; // –§–ª–∞–≥ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è, –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏ –ª–∏ –º—ã —É–∂–µ hover

      function initMobileHover() {
        const isMobile = window.innerWidth <= 767;
        if (!isMobile) return;

        const firstSlideHover = document.querySelector('.swiper-slide.events:first-child .events-slide-hover');
        if (!firstSlideHover || hasShownHover) return;

        // –°–Ω–∞—á–∞–ª–∞ —É—Å—Ç–∞–Ω–æ–≤–∏–º CSS —Å–≤–æ–π—Å—Ç–≤–∞
        firstSlideHover.style.transition = 'opacity 0.5s ease';
        firstSlideHover.style.opacity = '1';
        
        // –°—Ä–∞–∑—É —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –±—É–∫–≤
        const letters = firstSlideHover.querySelectorAll('.letter');
        letters.forEach(letter => {
            letter.style.opacity = '0';
            letter.style.transform = 'translateY(20px)';
            letter.style.transition = 'opacity 0.3s ease, transform 0.3s ease';
        });
        
        console.log('Hover element and letters initialized');

        function showAndHideHover() {
          if (hasShownHover) return;
          
          hasShownHover = true;
          console.log('Starting animations and timer');
          
          // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∞–Ω–∏–º–∞—Ü–∏–∏
          const letters = firstSlideHover.querySelectorAll('.letter');
          letters.forEach((letter, index) => {
            // –ó–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è –∫–∞–∂–¥–æ–π –±—É–∫–≤—ã
            setTimeout(() => {
              letter.style.opacity = '1';
              letter.style.transform = 'translateY(0)';
            }, index * 50); // 50ms –∑–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –±—É–∫–≤–∞–º–∏
          });

          // –ß–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã —Å–∫—Ä—ã–≤–∞–µ–º –≤–µ—Å—å —ç–ª–µ–º–µ–Ω—Ç
          setTimeout(() => {
            firstSlideHover.style.opacity = '0';
            console.log('Hiding hover element');
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—Ç–∏–ª–∏ –±—É–∫–≤ –ø–æ—Å–ª–µ –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏—è
            setTimeout(() => {
              letters.forEach(letter => {
                letter.style.opacity = '';
                letter.style.transform = '';
              });
            }, 500); // –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–∏ –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏—è
          }, 2000);
        }

        // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π observer –¥–ª—è –∫–∞–∂–¥–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
        const observer = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting && !hasShownHover) {
              console.log('Carousel is now visible');
              
              // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –±—É–∫–≤
              const letters = firstSlideHover.querySelectorAll('.letter');
              letters.forEach(letter => {
                letter.style.opacity = '0';
                letter.style.transform = 'translateY(20px)';
                letter.style.transition = 'opacity 0.3s ease, transform 0.3s ease';
              });

              // –ó–∞–ø—É—Å–∫–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é
              requestAnimationFrame(() => {
                showAndHideHover();
              });
              
              observer.disconnect();
            }
          });
        }, {
          threshold: 0.3 // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –ø–æ—Ä–æ–≥ –≤–∏–¥–∏–º–æ—Å—Ç–∏
        });

        // –ù–∞–±–ª—é–¥–∞–µ–º –∑–∞ –∫–∞—Ä—É—Å–µ–ª—å—é
        const carousel = document.querySelector('.swiper.swiper-events');
        if (carousel) {
          observer.observe(carousel);
          console.log('Started observing carousel');

          // –°–∫—Ä—ã–≤–∞–µ–º –ø—Ä–∏ –ª—é–±–æ–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–∏
          carousel.addEventListener('pointerdown', () => {
            if (!hasShownHover) {
              hasShownHover = true;
              firstSlideHover.style.opacity = '0';
              console.log('Hiding hover due to interaction');
            }
          }, { once: true });
        }
      }

      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ DOM
      document.addEventListener("DOMContentLoaded", () => {
        console.log('DOM Content Loaded');
        initMobileHover();
      });

      // –¢–∞–∫–∂–µ –ø—Ä–æ–±—É–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Å–ª–µ –ø–æ–ª–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
      window.addEventListener("load", () => {
        console.log('Window Loaded');
        initMobileHover();
      });

      // –ò –ø–æ—Å–ª–µ —Å–æ–±—ã—Ç–∏—è cardsReady
      document.addEventListener("cardsReady", () => {
        console.log('Cards Ready');
        initMobileHover();
      });
    </script>
  </body>
</html>
